/* * Settings * ----------------------------------------------------------------------------- * * var 'analyticsId' (string) = Google analytics ID string (UA-XXXXX-X) * var 'linksColor' (string) = Fallback color for links on hover state (if color not defined in #theme-backgrounds). * * var 'googleMap' (object) = Google map settings *	   var 'googleMap.address' (string) = Address line (You can pass latitude and longitude if this field is used) *	   var 'googleMap.latitude' (int) = Location's latitude *	   var 'googleMap.longitude' (int) = Location's longitude *	   var 'googleMap.title' (string) = Poiner title *	   var 'googleMap.ballonText' (string) = Text showed in baloon *	   var 'googleMap.zoom' (int) = Zoom level value * * var 'tweet' (object) = Twitter plugin settings *	   var 'tweet.username' (string) = Twitter username *	   var 'tweet.count' (int) = Number of displayed entries * * var 'rss' (object) = Rss plugin settings *	   var 'rss.feed' (string) = Rss feed source *	   var 'rss.count' (int) = Number of displayed entries * * var 'flickr' (object) = Flickr plugin settings *	   var 'flickr.query' (string) = Flickr API query (Info: http://www.flickr.com/services/feeds/) *	   var 'flickr.count' (int) = Number of displayed entries */var dbooomSettings = {	analyticsId:   false,	linksColor:    "#fc0",	googleMap: {		address:     '',		latitude:    29.518943,		longitude:   -98.569734,		title:       'Main office',		baloonText:  'Here we are!',		zoom:        10	},	tweet: {		username:    'csgfamily',		count:       3	},	rss: {		feed:        'http://themeforest.net/feeds/new-themeforest-items.atom',		count:       2	},	flickr: {		query:       '68921355@N02',		count:       12	}};/* Fallback color for links * -------------------------------------------------------------------------- */colorReference = dbooomSettings.linksColor;/* Get base path to the scripts files by getting 'data-path' value of * #js-dispatcher * -------------------------------------------------------------------------- */var dispatherObject = document.getElementById('js-dispatcher');var dispatherValue = dispatherObject.getAttribute('src');var myRe = /(.*)scripts.js/ig;var scriptsPath = myRe.exec( dispatherValue )[1];/* Google analytics loading * -------------------------------------------------------------------------- */if(dbooomSettings.analyticsId) {	var _gaq=[['_setAccount',dbooomSettings.analyticsId],['_trackPageview']];	(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;	g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';	s.parentNode.insertBefore(g,s)}(document,'script'));}/* Scripts loading chain * -------------------------------------------------------------------------- */yepnope({	load: [		scriptsPath + 'libs/jquery/jquery.min.js',		scriptsPath + 'libs/jquery-ui/jquery-ui.min.js'	],	complete: function () {		/* Remove no-js class from page if JS is enabled as fast as possible		 * ---------------------------------------------------------------------- */		jQuery('html').removeClass('no-js');		/* Load everything else after DOM is ready		 * ---------------------------------------------------------------------- */		$(document).ready(function() {			/* Supersized plugin - Page backgrounds			 * -------------------------------------------------------------------- */			yepnope({				test: $('#theme-backgrounds').length,				yep: scriptsPath + 'libs/supersized/supersized.core.min.js',				complete: function() {					var dbooomSlides = [];					$('<div id="body-texture">').appendTo('body');					// Get images					$('#theme-backgrounds li').each(function() {						dbooomSlides.push({ image: $(this).data('src') });					});					// Initialize plugin					$.supersized({						fit_portrait: 1,						image_protect: 1,						start_slide: 0,						slide_links: 0,						thumb_links: 0,						slides: dbooomSlides					});					// Redefine links color					colorReference = $('#theme-backgrounds li:eq(' + $.supersized.vars.current_slide + ')').data('color');				}			});			/* gMap plugin			 * -------------------------------------------------------------------- */			yepnope({				test: $('.gmap-holder').length,				yep: 'http://maps.google.com/maps/api/js?sensor=false&callback=gmapLoader'			});			/* HTML5 Forms			 * -------------------------------------------------------------------- */			yepnope({				test: $('form').length,				yep: scriptsPath + 'libs/jquery-formalize/jquery.formalize.min.js'			});			/* Twitter widgets			 * -------------------------------------------------------------------- */			yepnope({				test: $('.widget-tweets, .widget-last-tweet').length,				yep: scriptsPath + 'libs/tweet/jquery.tweet.js',				callback: function() {					$('.widget-tweets .widget-content').tweet({						username: dbooomSettings.tweet.username,						count: dbooomSettings.tweet.count,						loading_text: 'Loading. Please wait...'					}).bind('loaded', function() {						hoverColor();						$('.no-multiplebgs .widget-tweets li').prepend('<span class="widget-icon" />');					});					$('.widget-last-tweet .widget-content').tweet({						username: dbooomSettings.tweet.username,						count: 1,						loading_text: 'Loading. Please wait...'					});				}			});			/* Video-JS			 * -------------------------------------------------------------------- */			yepnope({				test: $('.video-js').length,				yep: [					scriptsPath + 'libs/video-js/video.min.js',					scriptsPath + 'libs/video-js/video-js.min.css'				]			});			/* Zrssfeed - RSS widgets			 * -------------------------------------------------------------------- */			yepnope({				test: $('.widget-rss').length,				yep: scriptsPath + 'libs/zrssfeed/jquery.zrssfeed.min.js',				callback: function() {					$('.widget-rss .widget-content').rssfeed(						dbooomSettings.rss.feed, {						limit: dbooomSettings.rss.count,						header: false,						titletag: false,						content: false,						snippet: false }, function() {							$('.no-multiplebgs .widget-rss li').prepend('<span class="widget-icon" />');					});				}			});			/* Jflickrfeed - Flickr widgets			 * -------------------------------------------------------------------- */			yepnope({				test: $('.widget-gallery').length,				yep: scriptsPath + 'libs/jflickrfeed/jflickrfeed.min.js',				callback: function() {					$('.widget-gallery .widget-content').jflickrfeed({						limit: dbooomSettings.flickr.count,						qstrings: { id: dbooomSettings.flickr.query },						itemTemplate: '<a href="{{image_b}}" class="prettyPhoto element-holder media-image"><img src="{{image_s}}" alt="{{title}}" /></a>'					}, function(data) {						prettyInit();					});				}			});			/* BX-Slider - Content Slider			 * -------------------------------------------------------------------- */			yepnope({				test: $('.slider-content, .gallery-fading').length,				yep: scriptsPath + 'libs/bxslider/jquery.bxSlider.min.js',				callback: function() {					// Hide captions					$('.slide-caption-left, .slide-caption-right').css({display: 'none'});					/* Slider content ------------------------------------------------- */					$('.slider-content ul').bxSlider({						auto: true,						speed: 600,						pause: 7000,						onAfterSlide: function(currentSlideNumber, totalSlideQty, currentSlideHtmlObject) {							$('.slider-content .slide-caption-left, .slider-content .slide-caption-right').fadeOut();							currentSlideHtmlObject.find('.slide-caption-left, .slide-caption-right').delay(100).fadeIn(1000);						}					});					/* Gallery fading ------------------------------------------------- */					$('.gallery-fading ul').bxSlider({						mode: 'fade',						controls: false,						pager: true,						auto: true,						speed: 1000,						pause: 5000,						autoHover: true,						autoDelay: 5000,						onAfterSlide: function(currentSlideNumber, totalSlideQty, currentSlideHtmlObject) {							$('.gallery-fading .slide-caption-left, .gallery-fading .slide-caption-right').fadeOut();							currentSlideHtmlObject.find('.slide-caption-left, .slide-caption-right').delay(100).fadeIn(1000);						}					});				}			});			/* Nivo slider - Image slider			 * -------------------------------------------------------------------- */			yepnope({				test: $('.slider-nivo').length,				yep: scriptsPath + 'libs/nivo-slider/jquery.nivo.slider.pack.js',				callback: function() {					$('.slider-nivo .slider-inner').nivoSlider({						pauseTime: 10000,						directionNavHide: false,						controlNav: false					});				}			});			/* Roundabout slider			 * -------------------------------------------------------------------- */			yepnope({				test: $('.slider-round').length,				yep: scriptsPath + 'libs/roundabout/jquery.roundabout.min.js',				callback: function() {					// Initial setup for slide descriptions					$('.slide-desc').css({display: 'none'});					$('.slider-round ul li:first-child .slide-desc').fadeIn();					// Roundabout plugin					$('.slider-round ul')					.roundabout({						minScale: 0.1,						minOpacity: 0.3,						duration: 600,						autoplay: true,						autoplayDuration: 5000,						autoplayPauseOnHover: true,						easing: 'easeOutBack'					}).on('childrenUpdated', function() {						$('.slide-desc').fadeOut();						$('.roundabout-in-focus .slide-desc').fadeIn();					});				}			});			/* Quicksand plugin - Portfolio/Gallery filters			 * -------------------------------------------------------------------- */			yepnope({				test: $('.portfolio-filterable, .gallery-filterable').length,				yep: scriptsPath + 'libs/quicksand/jquery.quicksand.js',				callback: function() {					var $portfolioSource = $('.portfolio-filterable, .gallery-filterable');					var $portfolioTarget = $portfolioSource.clone();					// Filter portfolio on click					$('.portfolio-filter a').click(function(e) {						$(this).addClass('current-cat').siblings().removeClass('current-cat');						// Get selected elelemnts						if($(this).data('category') == 'all') {						  var selectedItems = $portfolioTarget.find('.portfolio-item, .gallery-item');						} else {						  var selectedItems = $portfolioTarget.find('.portfolio-item[data-category~="' + $(this).data('category') + '"], .gallery-item[data-category~="' + $(this).data('category') + '"]');						}						// Quicksand						$portfolioSource.quicksand(selectedItems, {							duration: 800,							easing: 'swing',							adjustHeight: 'dynamic'						}, function() {							prettyInit();							hoverColor();							// Show message if no results							if($('.portfolio-filterable .portfolio-item').length == 0) {								$('.portfolio-filterable').after('<div id="portfolio-message" class="box-warning"><p>No results found!</p></div>');								$('#portfolio-message').show();							} else {								$('#portfolio-message').hide();							}						});						return false;					});				}			});			/* Rest of the scripts			 * -------------------------------------------------------------------- */			yepnope({				load: [					scriptsPath + 'libs/swfobject/swfobject.js',					scriptsPath + 'libs/jquery-easing/jquery.easing.js',					scriptsPath + 'libs/tipsy/jquery.tipsy.js',				],				complete: function () {					/* Process color values on hover					 * ---------------------------------------------------------------- */					hoverColor();					/* Get prettyPhoto support					 * ---------------------------------------------------------------- */					prettyInit();					/* Add frameborder attribute to the iframe elements					 * ---------------------------------------------------------------- */					$('iframe').attr({ frameBorder: 0 });					/* Top navigation					 * ---------------------------------------------------------------- */					// Dropdown element offset					$('#header-navigation li ul').each(function() {						$(this).css({display: 'block'});						// Dropdown properties						var offset = $(this).offset();						var width  = $(this).children('li').width();						var parent = $(this).parent('li').width();						if((offset.left + width) > document.documentElement.clientWidth) {							if( $(this).parent().parent().attr('id') == 'header-navigation' ) {								$(this).css({left: -(width - parent - 10)});							} else {								$(this).css({left: -(width + 2), paddingRight: '2px'});							}						}					});					// Some init tuning					$('#header-navigation ul').fadeOut('fast');					$('#header-navigation a').removeAttr('title');					// Touch devices					$('#header-navigation li.dropdown > a').on({						touchstart: function(event) {							if($(this).parent().hasClass('enabled')) {								window.location = $(this).attr('href');							}							$(this)								.parent()								.addClass('enabled')								.children('ul').css({display: "block"});							$(this)								.parent()								.siblings()								.removeClass('enabled')								.children('ul').css({display: "none"});						},						click: function(event) {							if($(this).hasClass('enabled')) {								return false;							}						}					});					$('#header-navigation li.dropdown').hover(						function() {							$(this).children('ul').stop(true, true).delay(200).slideDown(400, 'easeOutSine');						},						function() {							$(this).children('ul').stop(true, true).delay(100).fadeOut('fast');						}					);					// Text indentation animation					$('#header-navigation li li').hover(function(){						$(this).children('a').animate(							{textIndent: '5px'},							{duration: 'fast', queue: false}						);					}, function() {						$(this).children('a').animate(							{textIndent: '0px'},							{duration: 'fast', queue: false}						);					});					/* Contact form handling					 * ---------------------------------------------------------------- */					if($('#contact-form').length) {						$('#contact-form').each(function() {							var form = $(this);							// Form submit respond							form.after('<div id="contact-response" />');							var response = form.next('#contact-response').css({display: 'none'});							// Submit contact form via AJAX							form.submit(function(event) {								event.preventDefault();								$.ajax({									type: 'POST',									url: $(this).attr('action'),									data: $(this).serialize(),									success: function(data){										form.slideUp();										response.html(data).fadeIn('slow');									},									dataType: 'html'								});							});						});					}					/* Tipsy tooltips					 * ---------------------------------------------------------------- */					$('.social-icons-list a').tipsy({fade: true, gravity: 's'});					$('#contact-form input, #comment-reply input').tipsy({fade: true, gravity: 'w'});					$('.title-right').tipsy({fade: true, gravity: 'e'});					$('.post-related-item, .latest-news .element-holder').tipsy({fade: true, gravity: 'n'});					/* Tabs					 * ---------------------------------------------------------------- */					$('.tabs-block, .widget-tabs').tabs({						fx: { opacity: 'toggle' }					});					/* Toggles					 * ---------------------------------------------------------------- */					$(this).find('.toggle-content').css({display: 'none'});					$('.toggle-trigger.active').next().css({display: 'block'});					$('.toggle-trigger').click(function() {						$(this).toggleClass('active').next().stop(true, true).slideToggle('normal', 'easeOutSine');						// Disable link click						return false;					});					/* Accordions					 * ---------------------------------------------------------------- */					$('.accordion-block').each(function() {						// Hide all accordions content						$(this).find('.accordion-content').css({display: 'none'});						$('.accordion-trigger.active').next().css({display: 'block'});						// Click on accordion item trigger and show the content						$(this).find('.accordion-trigger').click(function() {							// On click we close all slides and removes 'on' class							$('.accordion-trigger').removeClass('active');							$('.accordion-content').slideUp();							// Open next to this trigger slider							if($(this).next().is(':hidden') == true) {								$(this).addClass('active');								$(this).next().slideDown();							}							// Disable link click							return false;						});					});					/* Team member					 * ---------------------------------------------------------------- */					$('.team-member-info').css({display: 'none'});					// Animation					$('.team-members li').hover(function() {						$(this).find('.team-member-info').stop(true, true).slideDown();					}, function() {						$(this).find('.team-member-info').stop(true, true).slideUp();					});					/* Featured news block					 * ---------------------------------------------------------------- */					$('.featured-news-text').each(function() {						var boxElement = $(this);						var boxHeight = boxElement.height();						boxElement.children('p').css({display: 'none'});						var boxMinHeight = boxElement.height();						// Animation						$(this).parent().hover(function() {							boxElement.stop(true, true).animate({height: boxHeight});							$(this).find('p').stop(true, true).fadeIn();						}, function() {							boxElement.stop(true, true).animate({height: boxMinHeight});							$(this).find('p').stop(true, true).fadeOut();						});					});					/* Users scripts					 * ---------------------------------------------------------------- */					yepnope(scriptsPath + 'user-scripts.js');				}			});		});	}});/* Elements colors and backgrounds change * -------------------------------------------------------------------------- */function hoverColor() {	if(colorReference.length) {		$('a').each(function() {			// Get link's default state color			var linkDefaultColor = $(this).css('color');			// Animate link on hover			$(this).hover(function() {				$(this).css({color: colorReference});			}, function() {				$(this).css({color: linkDefaultColor});			});		});	}}/* PrettyPhoto initialize function * -------------------------------------------------------------------------- */function prettyInit() {	if(jQuery().prettyPhoto === undefined) {		yepnope({			test: $('.prettyPhoto,.media-image,.media-link,.media-video').length,			yep: {				'prettyStyles' : scriptsPath + 'libs/prettyphoto/css/prettyPhoto.css',				'prettyScripts' : scriptsPath + 'libs/prettyphoto/jquery.prettyPhoto.js'			},			callback: function (url, result, key) {				if(key == 'prettyScripts') {					$('.prettyPhoto').prettyPhoto({						deeplinking: false,						social_tools: false					});					imageOverlay();				}			}		});	} else {		$('.prettyPhoto').prettyPhoto({			deeplinking: false,			social_tools: false		});		imageOverlay();	}}/* Elements overlay on hover * -------------------------------------------------------------------------- */function imageOverlay() {	$('.prettyPhoto,.media-image,.media-link,.media-video')		.bind('mouseover mouseout', function(event) {			var thisItem = $(this);			var width = thisItem.width();			var height = thisItem.height();			// Check if element has zoom frame and append if it has not			thisItem.not(':has(.zoom-frame)')				.css({position: 'relative'})				.append('<span class="zoom-frame"><span class="zoom-frame-icon" /></span>');		// Set zoom frame dimentions		var zoomFrame = thisItem.find('.zoom-frame');		var zoomFrameIcon = thisItem.find('.zoom-frame-icon');		zoomFrame.width(thisItem.width() - 10 ).height( thisItem.height() - 10);		// Animation		if (event.type == 'mouseover') {			zoomFrame.stop().fadeTo('slow', 1);			zoomFrameIcon.stop().animate({top: '50%'});		} else {			zoomFrame.stop().fadeTo('slow', 0);			zoomFrameIcon.stop().animate({top: '70%'});		}	});}/* Google gmap * -------------------------------------------------------------------------- */function gmapLoader() {	yepnope({		load: scriptsPath + 'libs/gmap/jquery.gmap.min.js',		callback: function() {			$('.gmap-holder').gMap({				markers: [{					latitude: dbooomSettings.googleMap.latitude,					longitude: dbooomSettings.googleMap.longitude,					address: dbooomSettings.googleMap.address,					title: dbooomSettings.googleMap.title,					html: dbooomSettings.googleMap.baloonText,					popup: false				}],				zoom: dbooomSettings.googleMap.zoom			});		}	});};